# Фронт Эвереста

## Tailwind

Пользовательские классы:

- `filter-*` - Фильтры, которые меняют на заданный цвет
- `scrollbar-transparent` - делает полосу прокрутки прозрачной
- `scrollbar-custom` - стилизует полосу прокрутки в соответствии с дизайном
- `-mx-container` - выставляет отрицательные внешние отступы как у контейнера для элемента. По факту лишает отступов контейнера
- `px-container` - добавляет внутренние отступы как у контейнера

Пользовательские динамические классы:

- `circle-[*]` - выставляет одинаковые `width` и `height` из значения, `border-radius: 50%` и `overflow: hidden`
- `bg-default-*` - выставляет `background-position:center`, `background-repeat:no-repeat` и `background-size` из значения. Варианты значений: `contain`, `cover`, `auto` или арбитражное через `[]`

Пользовательские псевдо селекторы:

- `pseudo:` - назначает стили на `::after` и `::before` одновременно
- `group-peer-[*]` - выставляет стили на основе группы, которая имеет перед собой элемент с условиями из пользовательского значения
- `previous-has-[*]` - работает как peer, но условие проверяется только на предыдущем элементе, а не на любом предыдущем родственнике. То-есть под капотом в CSS селекторе используется `+` вместо `~`
- `scroll-btn-yt` и `scroll-btn-yb` - выставляют стили для вертикальной верхней и нижней кнопки полосы прокрутки. В основном используется для добавления пустого пространства у полосы сверху и снизу

## Релизы

В начале нужно получить токен авторизации гитхаба и вставить в файл `.env.local`:

```dotenv
GITHUB_TOKEN="your-token"
```

Для создания релизов нужно использовать команду

```Bash
pnpm run release
```

Без аргументов запустить релиз нельзя, поэтому нужно добавить в зависимости от новой версии:

- `--major` - Для создания новой версии `x.0.0`
- `--minor` - Для создания `0.x.0`
- `--patch` - Для создания `0.0.x`
- `--beta` - Для создания `0.0.0-beta.x`.

### Примеры использования

Предположим, что текущая версия `1.2.3`:

1. `pnpm run release -- --major` - создаст версию `2.0.0`
2. `pnpm run release -- --minor` - создаст версию `1.3.0`
3. `pnpm run release -- --patch` - создаст версию `1.2.4`
4. `pnpm run release -- --beta` - создаст версию `1.2.3-beta.0`
5. `pnpm run release -- --minor --beta` - создаст версию `1.3.0-beta.0`

Предположим, что текущая версия `1.2.3-beta.1`:

1. `pnpm run release -- --major` - создаст версию `2.0.0`
2. `pnpm run release -- --minor` - создаст версию `1.3.0`
3. `pnpm run release -- --patch` - создаст версию `1.2.4`
4. `pnpm run release -- --beta` - создаст версию `1.2.3-beta.2`
5. `pnpm run release -- --minor --beta` - создаст версию `1.3.0-beta.2`

### Работа скрипта

1. Проверяется указан ли токен в env переменной `GITHUB_TOKEN`
2. Если нет токена, то выводится ошибка
3. Иначе Проверяется есть ли незакомиченные изменения
4. Если есть изменения, то выводится ошибка
5. Иначе запоминает текущую ветку
6. Переключается на ветку `master`
7. Получает все последние изменения с удаленного репозитория
8. Достаёт название и владельца репозитория из `package.json`
9. Создаёт сессию в гитхабе по токену из env
10. Проверяет есть у пользователя права записи в репозиторий
11. Если нет прав, то выводит ошибку
12. Иначе достаёт текущую версию из `package.json`
13. Парсит входные аргументы
14. Записывает в переменную новую версию в зависимости от аргументов
15. Создаёт ветку `release/<новая_версия>`
16. Записывает новую версию в `package.json`
17. Комитит изменение `package.json`
18. Пробует создать тэг с новой версии
19. Если не получается, то выводит ошибку
20. Иначе пушит изменения на удаленный репозиторий
21. Переключается обратно на ветку, которая была до запуска скрипта
22. Создаёт ПР на слияние ветки `release/<новая_версия>` в `master`
23. Мерджит ПР
24. Создаёт ПР на слияние ветки `master` в `dev`
25. Создаёт релиз в гитхабе
